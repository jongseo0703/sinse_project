<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./css/tips_page_styles.css">
</head>
<body>
    <div id="header">
        <img src="./images/logo.png" alt="">
        <div id="menu">
            <h2 id="jRegion">일본 지역별 정보</h2>
            <h2 id="jTips">일본 여행 꿀팁</h2>
            <h2 id="jCulture">일본 문화</h2>
        </div>
    </div>
    <div id="wrapper">
        <div id="container">
            <h1 class="site-logo">JAPAN</h1>
            <h1 class="site-logo">TOUR</h1>
            <h1 class="site-logo">TIP</h1>
            <div id="section">
                <h2>필수 꿀팁</h2>
                <div id="image-container">
                    <div class="slider"></div>
                </div>
                <div id="button-container"></div>
            </div>
        </div>
        <div id="seperate"></div>
        <div id="tips-container">
            <h2>추가 꿀팁</h2>
            <div id="content">
                <img src="./images/스이카.png">
                <div id="text-content">
                    <h3>스이카로 돌아다니기</h3>
                    <p>일본의 대표적인 교통카드 스이카 최근 애플페이와 호환 가능하면서 많이 사용되는 교통카드 입니다.  우리나라 
                        티머니처럼 코인락커, 편의점 등에서도 사용 가능합니다. 교통카드 사용 후 잔액에서 220엔의 
                        수수료를 제외 한 남은 금액과 보증금(¥500)을 돌려받을 수 있습니다. 220엔 이하의 잔액이 
                        남았을 경우에는 따로 220엔을 맞춘 수수료를 
                        낼 필요가 없기 때문에 최대한 안에 들어있는 
                        잔액 사용 후 반납하는 것이 좋습니다. 
                    </p>
                </div>
            </div>
            <div id="content">
                <img src="./images/지정구역흡연.png">
                <div id="text-content">
                    <h3>흡연은 지정 구역에서</h3>
                    <p>
                        일본에서는 공공장소에 흡연 가능 구역을 지정하고 있습니다. 길을 걸어가며 흡연하거나 꽁초를 땅바닥에 버리는 일은 금지되어 있으며 벌금이 부과되기도 합니다.
                        일본의 일부 식당이나 카페에서는 실내 흡연을 허용하는 곳이 있으나 최근 흡연 구역을 분리하거나 금연인 가게도 늘고 있습니다. 흡연을 희망할 경우 사전에 문의 후 자리를 안내받으면 됩니다.  
                    </p>
                </div>
            </div>
            <div id="content">
                <img src="./images/머니트레이.png">
                <div id="text-content">
                    <h3>돈은 머니트레이에 두기</h3>
                    <p>
                        손에서 손으로 건네는 우리나라와 다르게 
                        일본은 손님이 내고 직원이 받은 금액을 
                        정확하게 확인하기 위해 계산할 때 테이블 위나 
                        머니 트레이에 돈과 카드를 올려두면 됩니다.
                        반대로 거스름돈은 손님의 손 위에 둡니다. 
                        일본은 상점, 식당뿐만 아니라 택시에도 
                        머니트레이가 있답니다.  
                    </p>
                </div>
            </div>
            <div id="content">
                <img src="./images/질서지키기.png">
                <div id="text-content">
                    <h3>질서 지키기</h3>
                    <p>
                        일본 지하철역에는 발밑에 줄서는 위치가 
                        그려져 있으며 이 선에 맞춰 줄을 서야 됩니다. 
                        또한 자신의 몸이나 물건이 다른 사람에게 
                        닿지 않도록 간격을 적당히 띄고 줄을 서야 됩니다. 만약 닿았을 때는 ‘스미마셍’과 같이 미안함을 표현해야 됩니다. 뿐만 아니라 지하철 탑승 시에는 
                        무조건 안에 사람이 다 내리고 탑승하는 것이 
                        예의 입니다.   
                    </p>
                </div>
            </div>
            <div id="content">
                <img src="./images/콘센트.png">
                <div id="text-content">
                    <h3>일본 콘센트</h3>
                    <p>
                        일본 전압은 100v (110v 이용가능)기준으로 
                        사용하고 있어, 220v를 사용하는 한국에서 
                        올때는 반드시 여행용 어댑터(멀티 플러그)를 
                        지참해야 됩니다. 
                        플러그는 A타입으로 납작하고 길쭉한 두개의 
                        핀이 접지된 형태를 하고 있다.
                    </p>
                </div>
            </div>
            <div id="content">
                <img src="./images/자전거.jpg">
                <div id="text-content">
                    <h3>자전거는 지정 구역에</h3>
                    <p>
                        일본은 자전거를 차와 똑같이 취급하기 때문에
                        자전거를 지정된 장소에 세워 두지 않으면 
                        주차위반 딱지를 발급 받고 방치 자전거로 
                        간주되어 철거 및 벌금이 부과됩니다.
                        자전거 대여시  세워도 되는 장소에 정차 후 
                    </p>
                </div>
            </div>
        </div>
        <div id="footer">
            <hr>
            <div id="text_area">
                <h3>Virtual Japan Tour 서울특별시 서대문구 명지전문대  | 대표자 : 박종서 | 대표전화  : 00-1234-5678</h3>
                <h3>Copyright © Virtual Japan Tour All Rights Reserved.</h3>
            </div>
        </div>
    </div>
</body>
</html>
<script>
    //헤더의 메뉴들에 대한 변수들
    let logo = document.querySelector("#header img");
    let jRegion = document.getElementById("jRegion");
    let jTips = document.getElementById("jTips");
    let jCulture = document.getElementById("jCulture");

    let section = document.getElementById("section");
    let button_container = document.getElementById("button-container");
    let image_container = document.getElementById("image-container");
    let slider = document.querySelector(".slider");
    let currentIndex = 0; //현재 인덱스(즉, 메인에 있는 이미지의 인덱스)
    let maxImage = 9; //이미지의 총 수
    let btnArray = [];
    let imgs;
    
    //각 온천의 이미지를 담은 배열
    let imgArray = [
        "./images/tipImage/img1.jpg",
        "./images/tipImage/img2.png",
        "./images/tipImage/img3.png",
        "./images/tipImage/img4.jpg",
        "./images/tipImage/img5.jpg",
        "./images/tipImage/img6.jpeg",
        "./images/tipImage/img7.png",
        "./images/tipImage/img8.jpg",
        "./images/tipImage/img9.jpg"
    ];

    //각 온천의 이름을 담은 배열
    let tipsNameArray = [
        "택시 문은 자동으로",
        "여권과 여권 사본",
        "동전지갑 챙기기",
        "어플 파파고앱 설치",
        "기차 JR 레일 패스",
        "여행시 의약품 챙기기",
        "여행보험 가입하기",
        "음식 건네지 않기",
        "기차 내 통화 금지"
    ];

    //각 온천의 설명을 담은 배열
    let tipsDescriptions = [
        "직접 문을 열고 닫는 우리나라와 다르게 일본 택시 문은 자동문이라 손님이 문을 닫고 열 필요가 없습니다.그리고 2명이서 택시를 타는 경우  2명 모두 택시 뒷자석에 타는 것이 예의 입니다. 만약 앞자리를 타야하는 경우, 택시 기사님께 먼저 물어보는 것이 예의 입니다.",
        "모든 해외여행에서 빠질 수 없는 여권을 꼭 챙겨야겠죠? 여권의 유효기간이 6개월 이상 남아있는지 확인하고, 여권과 함께 여권 사본을 준비하는 것이 좋아요. 여권을 분실 또는 도난 당하는 경우를 대비해 사본을 여러 장 준비해 주세요. 여권 사본은 위탁 수하물에, 소지하는 가방에 한 장씩 넣어두는 것이 좋습니다.",
        "일본은 현금 사용이 많은 나라예요. 특히 소규모 가게나 음식점, 자판기, 대중교통에서는 동전이 많이 사용되고 있어요. 또한, 일본의 동전은 종류가 많은데요, 주머니나 지갑에 그냥 두면 흩어지기가 쉽겠죠? 동전 지갑은 동전을 쉽게 정리하고 필요할 때 빠르게 꺼낼 수 있게 해줘요. 일본 여행 시 동전 지갑은 매우 유용한 아이템이니, 일본 여행 준비물로 동전 지갑 챙기기를 추천해 드려요.",
        "일본 여행의 필수 번역 앱 파파고예요. 파파고는 번역 및 의사소통을 할 때 사용하면 좋은데요, 텍스트, 음성, 이미지 번역이 가능하며, 일본어를 모르시는 분들께 아주 유용해요. 현지인과 대화 시에는 음성을 실시간으로 번역을 할 수 있고, 간판이나 안내문을 촬영하는 이미지 번역도 가능하답니다.",
        "일본에서 여러 도시를 여행할 계획이 있는 경우 꼭 JR 레일 패스를 구매하는 것이 좋아요. JR 레일 패스는 일정 기간 무제한으로 JR(일본 철도) 열차를 이용할 수 있는 패스인데요, 도쿄, 오사카, 교토 등의 주요 도시를 이동할 때 개별적으로 기차표를 구매하는 것보다 훨씬 더 경제적인 옵션이에요.",
        "그다음 추천 일본 여행 준비물은 의약품입니다. 처방 약이 있다면, 복용 중인 처방 약을 충분히 챙기고, 필요시 의사 소견서를 함께 준비하는 것이 좋아요. 처방 약이 없더라도, 감기약, 소화제, 진통제, 설사약 등 기본 의약품을 준비하기를 권해 드려요.",
        "무슨 일이 일어날지 몰라서 여행이 재밌는 것이지만, 그럼에도 생기는 일에 대해 대비를 하는 것이 좋아요. 여행자 보험은 장기 여행뿐만 아니라 단기 여행에도 가입하는 것이 좋은데요, 여행 중 발생할 수 있는 예기치 못한 사고나 재정 손실을 보상하는 다양한 여행자 보험 상품을 트립닷컴에서 만나볼 수 있어요.",
        "일본에서는 젓가락으로 음식을 집어서 다른 사람에게 건네는 걸 눈살을 찌푸리는 행동으로 생각해요. 화장한 후 사랑하는 사람의 유골을 젓가락으로 담는 장례 의식을 떠올리게 하기 때문이죠. 음식은 접시에 담아주시는 것이 좋아요. 도쿄에서 피해야 할 젓가락과 관련된 또 다른 금기로는 드럼 스틱과 같은 도구를 젓가락으로 사용하는 것과 젓가락을 음식에 수직으로 꽂는 행동이 있어요.",
        "기차는 도쿄 구석구석까지 연결되어 있어 여행에서 주로 이용하는 교통수단이 될 거예요. 따라서 해야 할 행동과 하지 말아야 할 행동이 무엇인지 알아두는 게 좋아요. 첫째, 전화를 무음 모드로 해두고 다른 승객에게 방해가 될 수 있으므로 긴 통화는 피해 주세요."
    ];

    //경로를 이동하기 위한 함수
    function moveRoutes() {
        logo.addEventListener("click", () => {
            location.href = 'main.html';
        });

        jCulture.addEventListener("click", () => {
            location.href = 'selectCulture.html';
        });

        jTips.addEventListener("click", () => {
            location.href = 'tips.html';
        });

        jRegion.addEventListener("click", () => {
            location.href = 'selectRegion.html';
        });
    }

    //이미지 렌더링 함수
    function renderImages() {
        slider.innerHTML = ""; //이미지 초기화

        for (let i = 0; i < imgArray.length; i++) {
            let slideItem = document.createElement("div");
            slideItem.classList.add("slide-item");
            slideItem.style.position = "relative";

            let img = document.createElement("img");
            img.src = imgArray[i];

            let caption = document.createElement("div");
            caption.classList.add("caption");

            //캡션의 HTML을 script로 만듦.
            caption.innerHTML = `
            <div class="caption-number">${(i + 1).toString().padStart(2, '0')}</div>
            <div class="caption-content">
            <h3>${tipsNameArray[i]}</h3>
            <p>${addLineBreaks(tipsDescriptions[i], 35)}</p>
            </div>
            `;

            caption.style.display = "none";

            slideItem.appendChild(img);
            slideItem.appendChild(caption);
            slider.appendChild(slideItem);

            imgs = document.querySelectorAll(".slider img");
            for(let i = 0; i < imgs.length; i++) {
                imgs[i].addEventListener("click", () => {
                    moveSlider(i);
                });
            }
        }
        updateImageStyles();
    }

    //현재 인덱스 기준 이미지 스타일 업데이트 (흐림 처리)
    function updateImageStyles() {
        let captions = slider.querySelectorAll(".caption");
        for (let i = 0; i < imgs.length; i++) {
            if (i == currentIndex) {
                imgs[i].style.opacity = "1";
                captions[i].style.display = "block";
            } else {
                imgs[i].style.opacity = "0.3";
                //대기중인 캡션은 설명이 보이지 않아야 하므로 none
                captions[i].style.display = "none";
            }
        }
    }

    //부드럽게 이동하기 위한 함수
    function moveSlider(index) {
        let moveDistance = 700; //오른쪽 마진이 300이고, 이미지 너비가 600이므로 300 + 600
        slider.style.transform = `translateX(-${index * moveDistance}px)`;
        currentIndex = index;
        updateImageStyles();
    }

    //줄바꿈을 처리하기 위한 함수
    function addLineBreaks(text, maxLineLength) {
        let result = "";
        //maxLineLength만큼 문자열을 뽑아서 <br>태그를 더함으로 줄바꿈이 이루어짐
        for (let i = 0; i < text.length; i += maxLineLength) {
            result += text.substr(i, maxLineLength) + "<br>";
        }
        return result;
    }

    function headerScroll() {
        let header = document.getElementById("header");
        window.addEventListener("scroll", () => {
            if (window.scrollY > 0) {
                header.classList.add("scrolled");
            } else {
                header.classList.remove("scrolled");
            }
        });
    }

    function init() {
        moveRoutes();
        headerScroll();
        renderImages();
        moveSlider(0);
    }

    addEventListener("load", () => {
        init();
    });
</script>